@ Program 2: Snake-like Systematic Room Exploration
@ Robot starts at any point and finds lower-left corner facing north
@ Goal: Find KEY + open DOOR OR find EXIT (whichever comes first)
@ Environment: Orthogonal rectangular room with 4 walls, no obstacles
@ Strategy: Snake pattern - sweep row by row like a snake

LOAD 2

@ Initialize state variables
haskey := FALSE
goingright := TRUE

@ Program: Find the bottom-left corner
TURN_LEFT

@ Move West until we hit the left wall.
WHILE FRONT_IS_CLEAR
    MOVE_FORWARD
END

@ Now we are at the left wall, facing West.
@ Turn left again to face South.
TURN_LEFT

@ Move South until we hit the bottom wall.
WHILE FRONT_IS_CLEAR
    MOVE_FORWARD
END

@ Turn right twice to face North
TURN_RIGHT
TURN_RIGHT

@ Main exploration loop - Snake pattern sweep
WHILE TRUE
    @ Priority 1: Check for immediate escape via exit hatch
    IF AT_EXIT
        @ Exit hatch found
        OPEN_DOOR
    END
    
    @ Priority 2: Check if at door with key
    IF AT_DOOR AND haskey  
        OPEN_DOOR
    END
    
    @ Priority 3: Pick up key if on it
    IF ON_KEY
        PICK_KEY
        haskey := TRUE
    END
    
    @ Snake movement pattern
    IF FRONT_IS_CLEAR
        @ Continue in current direction
        MOVE_FORWARD
    OTHERWISE
        @ Hit a wall - time to change direction (snake turn)
        IF goingright
            @ Currently going right, turn to go down
            TURN_RIGHT
            IF FRONT_IS_CLEAR
                MOVE_FORWARD
                @ Turn right again to go left (opposite direction)
                TURN_RIGHT
                goingright := FALSE
            OTHERWISE
                @ No room to go down, must be at bottom
                TURN_RIGHT
                TURN_RIGHT
            END
        OTHERWISE
            @ Currently going left, turn to go down  
            TURN_LEFT
            IF FRONT_IS_CLEAR
                MOVE_FORWARD
                @ Turn left again to go right (opposite direction)
                TURN_LEFT
                goingright := TRUE
            OTHERWISE
                @ No room to go down, must be at bottom
                TURN_LEFT
                TURN_LEFT
            END
        END
    END
END


@ The program will end.
END